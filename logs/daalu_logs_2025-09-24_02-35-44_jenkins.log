Running sub-tag 'jenkins' inside 'infrastructure' playbook...
[Infrastructure] Running playbook: infrastructure.yml
[Infrastructure] Inventory: /home/kez/Documents/python_projects/daalu/daalu/cloud-config/inventory/hosts.ini
[Infrastructure] Tags: jenkins
[1;35m[WARNING]: Found variable using reserved name: tags[0m

PLAY [Deploy Infrastructure] ***************************************************

TASK [Gathering Facts] *********************************************************
[1;35mcore/2.17/reference_appendices/interpreter_discovery.html for more information.[0m
[0;32mok: [openstack-infra-control-plane-q2mhs.kez-ironcloud.duckdns.org][0m
[1;35mcore/2.17/reference_appendices/interpreter_discovery.html for more information.[0m
[0;32mok: [openstack-infra-control-plane-bl5vb.kez-ironcloud.duckdns.org][0m
[1;35mcore/2.17/reference_appendices/interpreter_discovery.html for more information.[0m
[0;32mok: [openstack-infra-control-plane-nn9tr.kez-ironcloud.duckdns.org][0m

TASK [vexxhost.containers.package : Update state for rsync] ********************
[0;32mok: [openstack-infra-control-plane-q2mhs.kez-ironcloud.duckdns.org][0m
[0;32mok: [openstack-infra-control-plane-nn9tr.kez-ironcloud.duckdns.org][0m
[0;32mok: [openstack-infra-control-plane-bl5vb.kez-ironcloud.duckdns.org][0m

TASK [vexxhost.kubernetes.upload_helm_chart : Include help chart upload method tasks] ***
[0;36mincluded: /home/kez/.ansible/collections/ansible_collections/vexxhost/kubernetes/roles/upload_helm_chart/tasks/synchronize.yml for openstack-infra-control-plane-bl5vb.kez-ironcloud.duckdns.org, openstack-infra-control-plane-nn9tr.kez-ironcloud.duckdns.org, openstack-infra-control-plane-q2mhs.kez-ironcloud.duckdns.org[0m

TASK [vexxhost.kubernetes.upload_helm_chart : Ensure parent directory exists] ***
[0;32mok: [openstack-infra-control-plane-bl5vb.kez-ironcloud.duckdns.org][0m

TASK [vexxhost.kubernetes.upload_helm_chart : Ensure destination directory exists] ***
[0;32mok: [openstack-infra-control-plane-bl5vb.kez-ironcloud.duckdns.org][0m

TASK [vexxhost.kubernetes.upload_helm_chart : Upload Helm chart] ***************
[0;35m[DEPRECATION WARNING]: The connection's stdin object is deprecated. Call [0m
[0;35mdisplay.prompt_until(msg) instead. This feature will be removed in version [0m
[0;35m2.19. Deprecation warnings can be disabled by setting [0m
[0;35mdeprecation_warnings=False in ansible.cfg.[0m
[0;32mok: [openstack-infra-control-plane-bl5vb.kez-ironcloud.duckdns.org][0m

TASK [jenkins : Ensure Jenkins namespace exists] *******************************
[0;32mok: [openstack-infra-control-plane-bl5vb.kez-ironcloud.duckdns.org -> localhost][0m

TASK [jenkins : Create Jenkins Service Account and RBAC] ***********************
[0;32mok: [openstack-infra-control-plane-bl5vb.kez-ironcloud.duckdns.org -> localhost][0m

TASK [jenkins : Deploy Jenkins Helm chart] *************************************
[0;31mAn exception occurred during task execution. To see the full traceback, use -vvv. The error was: FileNotFoundError: [Errno 2] No such file or directory: '~/.kube/mgmt_config'[0m
[0;31mfatal: [openstack-infra-control-plane-bl5vb.kez-ironcloud.duckdns.org]: FAILED! => {"changed": false, "module_stderr": "Shared connection to 192.168.0.175 closed.\r\n", "module_stdout": "Traceback (most recent call last):\r\n  File \"/home/kez/.ansible/tmp/ansible-tmp-1758681355.4807038-728249-229995399762679/AnsiballZ_helm.py\", line 107, in <module>\r\n    _ansiballz_main()\r\n  File \"/home/kez/.ansible/tmp/ansible-tmp-1758681355.4807038-728249-229995399762679/AnsiballZ_helm.py\", line 99, in _ansiballz_main\r\n    invoke_module(zipped_mod, temp_path, ANSIBALLZ_PARAMS)\r\n  File \"/home/kez/.ansible/tmp/ansible-tmp-1758681355.4807038-728249-229995399762679/AnsiballZ_helm.py\", line 47, in invoke_module\r\n    runpy.run_module(mod_name='ansible_collections.kubernetes.core.plugins.modules.helm', init_globals=dict(_module_fqn='ansible_collections.kubernetes.core.plugins.modules.helm', _modlib_path=modlib_path),\r\n  File \"/usr/lib/python3.10/runpy.py\", line 224, in run_module\r\n    return _run_module_code(code, init_globals, run_name, mod_spec)\r\n  File \"/usr/lib/python3.10/runpy.py\", line 96, in _run_module_code\r\n    _run_code(code, mod_globals, init_globals,\r\n  File \"/usr/lib/python3.10/runpy.py\", line 86, in _run_code\r\n    exec(code, run_globals)\r\n  File \"/tmp/ansible_kubernetes.core.helm_payload_zxnif_o9/ansible_kubernetes.core.helm_payload.zip/ansible_collections/kubernetes/core/plugins/modules/helm.py\", line 924, in <module>\r\n  File \"/tmp/ansible_kubernetes.core.helm_payload_zxnif_o9/ansible_kubernetes.core.helm_payload.zip/ansible_collections/kubernetes/core/plugins/modules/helm.py\", line 740, in main\r\n  File \"/tmp/ansible_kubernetes.core.helm_payload_zxnif_o9/ansible_kubernetes.core.helm_payload.zip/ansible_collections/kubernetes/core/plugins/modules/helm.py\", line 418, in get_release_status\r\n  File \"/tmp/ansible_kubernetes.core.helm_payload_zxnif_o9/ansible_kubernetes.core.helm_payload.zip/ansible_collections/kubernetes/core/plugins/module_utils/helm.py\", line 169, in run_helm_command\r\n  File \"/tmp/ansible_kubernetes.core.helm_payload_zxnif_o9/ansible_kubernetes.core.helm_payload.zip/ansible_collections/kubernetes/core/plugins/module_utils/helm.py\", line 162, in env_update\r\n  File \"/tmp/ansible_kubernetes.core.helm_payload_zxnif_o9/ansible_kubernetes.core.helm_payload.zip/ansible_collections/kubernetes/core/plugins/module_utils/helm.py\", line 120, in _prepare_helm_environment\r\nFileNotFoundError: [Errno 2] No such file or directory: '~/.kube/mgmt_config'\r\n", "msg": "MODULE FAILURE\nSee stdout/stderr for the exact error", "rc": 1}[0m

PLAY RECAP *********************************************************************
[0;31mopenstack-infra-control-plane-bl5vb.kez-ironcloud.duckdns.org[0m : [0;32mok=8   [0m changed=0    unreachable=0    [0;31mfailed=1   [0m skipped=0    rescued=0    ignored=0   
[0;32mopenstack-infra-control-plane-nn9tr.kez-ironcloud.duckdns.org[0m : [0;32mok=3   [0m changed=0    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
[0;32mopenstack-infra-control-plane-q2mhs.kez-ironcloud.duckdns.org[0m : [0;32mok=3   [0m changed=0    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
Traceback (most recent call last):
  File "/home/kez/Documents/python_projects/daalu/daalu/main.py", line 114, in <module>
    deploy_all(tags)
  File "/home/kez/Documents/python_projects/daalu/daalu/main.py", line 84, in deploy_all
    steps[parent].deploy(str(inventory), tags=[tag])
  File "/home/kez/Documents/python_projects/daalu/daalu/src/daalu/infrastructure/deployer.py", line 12, in deploy
    return self.run("infrastructure.yml", inventory, tags, extra_vars)
  File "/home/kez/Documents/python_projects/daalu/daalu/src/daalu/core/deployer.py", line 33, in run
    raise RuntimeError(f"{self.name} deployment failed: {rc.status}")
RuntimeError: Infrastructure deployment failed: failed
