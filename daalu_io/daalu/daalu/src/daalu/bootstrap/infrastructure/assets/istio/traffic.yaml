# src/daalu/bootstrap/infrastructure/assets/istio/traffic.yaml


applications:
  - name: keycloak
    hostnames:
      - keycloak.daalu.io
    traffic_namespace: istio-ingress
    original_svc_namespace: auth-system

    gateway:
      name: gateway
      namespace: istio-ingress
      selector:
        istio: ingressgateway
      tls:
        mode: SIMPLE
        credentialName: keycloak-kc-daalu-io-tls

    service:
      name: keycloak
      port: 8080
      subset: ""

    destinationrule:
      trafficPolicy:
        tls:
          mode: DISABLE

  - name: keystone
    hostnames:
      - identity.daalu.io
    traffic_namespace: istio-ingress
    original_svc_namespace: openstack

    gateway:
      name: gateway
      namespace: istio-ingress
      selector:
        istio: ingressgateway
      tls:
        mode: SIMPLE
        credentialName: daalu-io-tls

    service:
      name: keystone-api
      port: 5000

    destinationrule:
      trafficPolicy:
        tls:
          mode: DISABLE
